{"version":3,"file":"index.js","names":["throwError","ensureInteger","getAddonReleaseVersion","cppCallbackWrapper","wrapAsync","addon","require","blur","r","cb","bitmap","data","getWidth","getHeight","err","call","plugin","blurAsync"],"sources":["../src/index.ts"],"sourcesContent":["import { throwError } from \"@jimp/utils\";\nimport { Blur } from \"@jimp/plugin-blur\";\nimport { ImageCallback } from \"@jimp/core\";\nimport {\n  ensureInteger,\n  getAddonReleaseVersion,\n  cppCallbackWrapper,\n  AsyncPlugin,\n  wrapAsync,\n} from \"@jimp-native/utils-ts\";\n\nconst addon = require(`../build/${getAddonReleaseVersion()}/plugin-blur-napi.node`);\n\nconst blur = function (r: number, cb?: ImageCallback<AsyncPlugin<Blur>>) {\n  try {\n    addon.blur(\n      this.bitmap.data,\n      this.getWidth(),\n      this.getHeight(),\n      ensureInteger(r),\n      cppCallbackWrapper(this, cb)\n    );\n\n    return this;\n  } catch (err) {\n    return throwError.call(this, err, cb);\n  }\n};\n\nconst plugin: () => AsyncPlugin<Blur> = () => ({\n  blur,\n  blurAsync: wrapAsync(blur),\n});\n\nexport default plugin;\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,aAAa;AAGxC,SACEC,aAAa,EACbC,sBAAsB,EACtBC,kBAAkB,EAElBC,SAAS,QACJ,uBAAuB;AAE9B,IAAMC,KAAK,GAAGC,OAAO,oBAAaJ,sBAAsB,EAAE,4BAAyB;AAEnF,IAAMK,IAAI,GAAG,SAAPA,IAAI,CAAaC,CAAS,EAAEC,EAAqC,EAAE;EACvE,IAAI;IACFJ,KAAK,CAACE,IAAI,CACR,IAAI,CAACG,MAAM,CAACC,IAAI,EAChB,IAAI,CAACC,QAAQ,EAAE,EACf,IAAI,CAACC,SAAS,EAAE,EAChBZ,aAAa,CAACO,CAAC,CAAC,EAChBL,kBAAkB,CAAC,IAAI,EAAEM,EAAE,CAAC,CAC7B;IAED,OAAO,IAAI;EACb,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZ,OAAOd,UAAU,CAACe,IAAI,CAAC,IAAI,EAAED,GAAG,EAAEL,EAAE,CAAC;EACvC;AACF,CAAC;AAED,IAAMO,MAA+B,GAAG,SAAlCA,MAA+B;EAAA,OAAU;IAC7CT,IAAI,EAAJA,IAAI;IACJU,SAAS,EAAEb,SAAS,CAACG,IAAI;EAC3B,CAAC;AAAA,CAAC;AAEF,eAAeS,MAAM"}