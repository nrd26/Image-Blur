{"version":3,"file":"index.js","names":["throwError","ensureInteger","getAddonReleaseVersion","cppCallbackWrapper","wrapAsync","addon","require","circle","options","cb","radius","Math","min","getWidth","getHeight","centreX","x","centreY","y","bitmap","data","err","call","plugin","circleAsync"],"sources":["../src/index.ts"],"sourcesContent":["import { throwError } from \"@jimp/utils\";\nimport { Circle } from \"@jimp/plugin-circle\";\nimport { ImageCallback } from \"@jimp/core\";\nimport {\n  ensureInteger,\n  getAddonReleaseVersion,\n  cppCallbackWrapper,\n  AsyncPlugin,\n  wrapAsync,\n} from \"@jimp-native/utils-ts\";\n\nconst addon = require(`../build/${getAddonReleaseVersion()}/plugin-circle-napi.node`);\n\nconst circle = function (\n  options:\n    | {\n        radius?: number;\n        x?: number;\n        y?: number;\n      }\n    | ImageCallback<AsyncPlugin<Circle>> = {},\n  cb?: ImageCallback<AsyncPlugin<Circle>>\n) {\n  if (typeof options === \"function\") {\n    cb = options;\n    options = {};\n  }\n\n  const radius =\n    options.radius || Math.min(this.getWidth(), this.getHeight()) / 2;\n  const centreX = options.x || this.getWidth() / 2;\n  const centreY = options.y || this.getHeight() / 2;\n\n  try {\n    addon.circle(\n      this.bitmap.data,\n      this.getWidth(),\n      this.getHeight(),\n      ensureInteger(radius),\n      ensureInteger(centreX),\n      ensureInteger(centreY),\n      cppCallbackWrapper(this, cb)\n    );\n\n    return this;\n  } catch (err) {\n    return throwError.call(this, err, cb);\n  }\n};\n\nconst plugin: () => AsyncPlugin<Circle> = () => ({\n  circle,\n  circleAsync: wrapAsync(circle),\n});\n\nexport default plugin;\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,aAAa;AAGxC,SACEC,aAAa,EACbC,sBAAsB,EACtBC,kBAAkB,EAElBC,SAAS,QACJ,uBAAuB;AAE9B,IAAMC,KAAK,GAAGC,OAAO,oBAAaJ,sBAAsB,EAAE,8BAA2B;AAErF,IAAMK,MAAM,GAAG,SAATA,MAAM,GASV;EAAA,IARAC,OAMsC,uEAAG,CAAC,CAAC;EAAA,IAC3CC,EAAuC;EAEvC,IAAI,OAAOD,OAAO,KAAK,UAAU,EAAE;IACjCC,EAAE,GAAGD,OAAO;IACZA,OAAO,GAAG,CAAC,CAAC;EACd;EAEA,IAAME,MAAM,GACVF,OAAO,CAACE,MAAM,IAAIC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACC,QAAQ,EAAE,EAAE,IAAI,CAACC,SAAS,EAAE,CAAC,GAAG,CAAC;EACnE,IAAMC,OAAO,GAAGP,OAAO,CAACQ,CAAC,IAAI,IAAI,CAACH,QAAQ,EAAE,GAAG,CAAC;EAChD,IAAMI,OAAO,GAAGT,OAAO,CAACU,CAAC,IAAI,IAAI,CAACJ,SAAS,EAAE,GAAG,CAAC;EAEjD,IAAI;IACFT,KAAK,CAACE,MAAM,CACV,IAAI,CAACY,MAAM,CAACC,IAAI,EAChB,IAAI,CAACP,QAAQ,EAAE,EACf,IAAI,CAACC,SAAS,EAAE,EAChBb,aAAa,CAACS,MAAM,CAAC,EACrBT,aAAa,CAACc,OAAO,CAAC,EACtBd,aAAa,CAACgB,OAAO,CAAC,EACtBd,kBAAkB,CAAC,IAAI,EAAEM,EAAE,CAAC,CAC7B;IAED,OAAO,IAAI;EACb,CAAC,CAAC,OAAOY,GAAG,EAAE;IACZ,OAAOrB,UAAU,CAACsB,IAAI,CAAC,IAAI,EAAED,GAAG,EAAEZ,EAAE,CAAC;EACvC;AACF,CAAC;AAED,IAAMc,MAAiC,GAAG,SAApCA,MAAiC;EAAA,OAAU;IAC/ChB,MAAM,EAANA,MAAM;IACNiB,WAAW,EAAEpB,SAAS,CAACG,MAAM;EAC/B,CAAC;AAAA,CAAC;AAEF,eAAegB,MAAM"}