{"version":3,"file":"index.js","names":["addon","require","getAddonReleaseVersion","circle","options","cb","radius","Math","min","getWidth","getHeight","centreX","x","centreY","y","bitmap","data","ensureInteger","cppCallbackWrapper","err","throwError","call","plugin","circleAsync","wrapAsync"],"sources":["../src/index.ts"],"sourcesContent":["import { throwError } from \"@jimp/utils\";\nimport { Circle } from \"@jimp/plugin-circle\";\nimport { ImageCallback } from \"@jimp/core\";\nimport {\n  ensureInteger,\n  getAddonReleaseVersion,\n  cppCallbackWrapper,\n  AsyncPlugin,\n  wrapAsync,\n} from \"@jimp-native/utils-ts\";\n\nconst addon = require(`../build/${getAddonReleaseVersion()}/plugin-circle-napi.node`);\n\nconst circle = function (\n  options:\n    | {\n        radius?: number;\n        x?: number;\n        y?: number;\n      }\n    | ImageCallback<AsyncPlugin<Circle>> = {},\n  cb?: ImageCallback<AsyncPlugin<Circle>>\n) {\n  if (typeof options === \"function\") {\n    cb = options;\n    options = {};\n  }\n\n  const radius =\n    options.radius || Math.min(this.getWidth(), this.getHeight()) / 2;\n  const centreX = options.x || this.getWidth() / 2;\n  const centreY = options.y || this.getHeight() / 2;\n\n  try {\n    addon.circle(\n      this.bitmap.data,\n      this.getWidth(),\n      this.getHeight(),\n      ensureInteger(radius),\n      ensureInteger(centreX),\n      ensureInteger(centreY),\n      cppCallbackWrapper(this, cb)\n    );\n\n    return this;\n  } catch (err) {\n    return throwError.call(this, err, cb);\n  }\n};\n\nconst plugin: () => AsyncPlugin<Circle> = () => ({\n  circle,\n  circleAsync: wrapAsync(circle),\n});\n\nexport default plugin;\n"],"mappings":";;;;;;AAAA;AAGA;AAQA,IAAMA,KAAK,GAAGC,OAAO,oBAAa,IAAAC,+BAAsB,GAAE,8BAA2B;AAErF,IAAMC,MAAM,GAAG,SAATA,MAAM,GASV;EAAA,IARAC,OAMsC,uEAAG,CAAC,CAAC;EAAA,IAC3CC,EAAuC;EAEvC,IAAI,OAAOD,OAAO,KAAK,UAAU,EAAE;IACjCC,EAAE,GAAGD,OAAO;IACZA,OAAO,GAAG,CAAC,CAAC;EACd;EAEA,IAAME,MAAM,GACVF,OAAO,CAACE,MAAM,IAAIC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACC,QAAQ,EAAE,EAAE,IAAI,CAACC,SAAS,EAAE,CAAC,GAAG,CAAC;EACnE,IAAMC,OAAO,GAAGP,OAAO,CAACQ,CAAC,IAAI,IAAI,CAACH,QAAQ,EAAE,GAAG,CAAC;EAChD,IAAMI,OAAO,GAAGT,OAAO,CAACU,CAAC,IAAI,IAAI,CAACJ,SAAS,EAAE,GAAG,CAAC;EAEjD,IAAI;IACFV,KAAK,CAACG,MAAM,CACV,IAAI,CAACY,MAAM,CAACC,IAAI,EAChB,IAAI,CAACP,QAAQ,EAAE,EACf,IAAI,CAACC,SAAS,EAAE,EAChB,IAAAO,sBAAa,EAACX,MAAM,CAAC,EACrB,IAAAW,sBAAa,EAACN,OAAO,CAAC,EACtB,IAAAM,sBAAa,EAACJ,OAAO,CAAC,EACtB,IAAAK,2BAAkB,EAAC,IAAI,EAAEb,EAAE,CAAC,CAC7B;IAED,OAAO,IAAI;EACb,CAAC,CAAC,OAAOc,GAAG,EAAE;IACZ,OAAOC,iBAAU,CAACC,IAAI,CAAC,IAAI,EAAEF,GAAG,EAAEd,EAAE,CAAC;EACvC;AACF,CAAC;AAED,IAAMiB,MAAiC,GAAG,SAApCA,MAAiC;EAAA,OAAU;IAC/CnB,MAAM,EAANA,MAAM;IACNoB,WAAW,EAAE,IAAAC,kBAAS,EAACrB,MAAM;EAC/B,CAAC;AAAA,CAAC;AAAC,eAEYmB,MAAM;AAAA;AAAA"}