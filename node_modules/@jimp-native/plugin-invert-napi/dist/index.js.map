{"version":3,"file":"index.js","names":["addon","require","getAddonReleaseVersion","invert","cb","bitmap","data","cppCallbackWrapper","err","throwError","call","plugin","invertAsync","wrapAsync"],"sources":["../src/index.ts"],"sourcesContent":["import { throwError } from \"@jimp/utils\";\nimport { Invert } from \"@jimp/plugin-invert\";\nimport {\n  getAddonReleaseVersion,\n  cppCallbackWrapper,\n  AsyncPlugin,\n  wrapAsync,\n} from \"@jimp-native/utils-ts\";\nimport { ImageCallback } from \"@jimp/core\";\n\nconst addon = require(`../build/${getAddonReleaseVersion()}/plugin-invert-napi.node`);\n\nconst invert = function (cb?: ImageCallback<AsyncPlugin<Invert>>) {\n  try {\n    addon.invert(this.bitmap.data, cppCallbackWrapper(this, cb));\n    return this;\n  } catch (err) {\n    return throwError.call(this, err, cb);\n  }\n};\n\nconst plugin: () => AsyncPlugin<Invert> = () => ({\n  invert,\n  invertAsync: wrapAsync(invert),\n});\n\nexport default plugin;\n"],"mappings":";;;;;;AAAA;AAEA;AAQA,IAAMA,KAAK,GAAGC,OAAO,oBAAa,IAAAC,+BAAsB,GAAE,8BAA2B;AAErF,IAAMC,MAAM,GAAG,SAATA,MAAM,CAAaC,EAAuC,EAAE;EAChE,IAAI;IACFJ,KAAK,CAACG,MAAM,CAAC,IAAI,CAACE,MAAM,CAACC,IAAI,EAAE,IAAAC,2BAAkB,EAAC,IAAI,EAAEH,EAAE,CAAC,CAAC;IAC5D,OAAO,IAAI;EACb,CAAC,CAAC,OAAOI,GAAG,EAAE;IACZ,OAAOC,iBAAU,CAACC,IAAI,CAAC,IAAI,EAAEF,GAAG,EAAEJ,EAAE,CAAC;EACvC;AACF,CAAC;AAED,IAAMO,MAAiC,GAAG,SAApCA,MAAiC;EAAA,OAAU;IAC/CR,MAAM,EAANA,MAAM;IACNS,WAAW,EAAE,IAAAC,kBAAS,EAACV,MAAM;EAC/B,CAAC;AAAA,CAAC;AAAC,eAEYQ,MAAM;AAAA;AAAA"}