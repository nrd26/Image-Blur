{"version":3,"file":"index.js","names":["throwError","getAddonReleaseVersion","cppCallbackWrapper","wrapAsync","addon","require","dither","cb","bitmap","data","getWidth","getHeight","err","call","plugin","dither16","dither16Async","dither565","dither565Async"],"sources":["../src/index.ts"],"sourcesContent":["import { throwError } from \"@jimp/utils\";\nimport { Dither } from \"@jimp/plugin-dither\";\nimport {\n  getAddonReleaseVersion,\n  cppCallbackWrapper,\n  AsyncPlugin,\n  wrapAsync,\n} from \"@jimp-native/utils-ts\";\nimport { ImageCallback } from \"@jimp/core\";\n\nconst addon = require(`../build/${getAddonReleaseVersion()}/plugin-dither-napi.node`);\n\nconst dither = function (cb?: ImageCallback<AsyncPlugin<Dither>>) {\n  try {\n    addon.dither(\n      this.bitmap.data,\n      this.getWidth(),\n      this.getHeight(),\n      cppCallbackWrapper(this, cb)\n    );\n    return this;\n  } catch (err) {\n    return throwError.call(this, err, cb);\n  }\n};\n\nconst plugin: () => AsyncPlugin<Dither> = () => ({\n  dither16: dither,\n  dither16Async: wrapAsync(dither),\n  dither565: dither,\n  dither565Async: wrapAsync(dither),\n});\n\nexport default plugin;\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,aAAa;AAExC,SACEC,sBAAsB,EACtBC,kBAAkB,EAElBC,SAAS,QACJ,uBAAuB;AAG9B,IAAMC,KAAK,GAAGC,OAAO,oBAAaJ,sBAAsB,EAAE,8BAA2B;AAErF,IAAMK,MAAM,GAAG,SAATA,MAAM,CAAaC,EAAuC,EAAE;EAChE,IAAI;IACFH,KAAK,CAACE,MAAM,CACV,IAAI,CAACE,MAAM,CAACC,IAAI,EAChB,IAAI,CAACC,QAAQ,EAAE,EACf,IAAI,CAACC,SAAS,EAAE,EAChBT,kBAAkB,CAAC,IAAI,EAAEK,EAAE,CAAC,CAC7B;IACD,OAAO,IAAI;EACb,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZ,OAAOZ,UAAU,CAACa,IAAI,CAAC,IAAI,EAAED,GAAG,EAAEL,EAAE,CAAC;EACvC;AACF,CAAC;AAED,IAAMO,MAAiC,GAAG,SAApCA,MAAiC;EAAA,OAAU;IAC/CC,QAAQ,EAAET,MAAM;IAChBU,aAAa,EAAEb,SAAS,CAACG,MAAM,CAAC;IAChCW,SAAS,EAAEX,MAAM;IACjBY,cAAc,EAAEf,SAAS,CAACG,MAAM;EAClC,CAAC;AAAA,CAAC;AAEF,eAAeQ,MAAM"}