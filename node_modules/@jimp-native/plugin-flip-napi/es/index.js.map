{"version":3,"file":"index.js","names":["throwError","getAddonReleaseVersion","cppCallbackWrapper","wrapAsync","addon","require","flip","horizontally","vertically","cb","bitmap","data","getWidth","getHeight","err","call","plugin","flipAsync","mirror","mirrorAsync"],"sources":["../src/index.ts"],"sourcesContent":["import { throwError } from \"@jimp/utils\";\nimport { Flip } from \"@jimp/plugin-flip\";\nimport { ImageCallback } from \"@jimp/core\";\nimport {\n  ensureInteger,\n  getAddonReleaseVersion,\n  cppCallbackWrapper,\n  AsyncPlugin,\n  wrapAsync,\n} from \"@jimp-native/utils-ts\";\n\nconst addon = require(`../build/${getAddonReleaseVersion()}/plugin-flip-napi.node`);\n\nfunction flip(\n  horizontally = true,\n  vertically = false,\n  cb?: ImageCallback<AsyncPlugin<Flip>>\n) {\n  try {\n    if (horizontally || vertically) {\n      addon.flip(\n        this.bitmap.data,\n        this.getWidth(),\n        this.getHeight(),\n        horizontally,\n        vertically,\n        cppCallbackWrapper(this, cb)\n      );\n    }\n\n    return this;\n  } catch (err) {\n    return throwError.call(this, err, cb);\n  }\n}\n\nconst plugin: () => AsyncPlugin<Flip> = () => ({\n  flip,\n  flipAsync: wrapAsync(flip),\n  mirror: flip,\n  mirrorAsync: wrapAsync(flip),\n});\n\nexport default plugin;\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,aAAa;AAGxC,SAEEC,sBAAsB,EACtBC,kBAAkB,EAElBC,SAAS,QACJ,uBAAuB;AAE9B,IAAMC,KAAK,GAAGC,OAAO,oBAAaJ,sBAAsB,EAAE,4BAAyB;AAEnF,SAASK,IAAI,GAIX;EAAA,IAHAC,YAAY,uEAAG,IAAI;EAAA,IACnBC,UAAU,uEAAG,KAAK;EAAA,IAClBC,EAAqC;EAErC,IAAI;IACF,IAAIF,YAAY,IAAIC,UAAU,EAAE;MAC9BJ,KAAK,CAACE,IAAI,CACR,IAAI,CAACI,MAAM,CAACC,IAAI,EAChB,IAAI,CAACC,QAAQ,EAAE,EACf,IAAI,CAACC,SAAS,EAAE,EAChBN,YAAY,EACZC,UAAU,EACVN,kBAAkB,CAAC,IAAI,EAAEO,EAAE,CAAC,CAC7B;IACH;IAEA,OAAO,IAAI;EACb,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZ,OAAOd,UAAU,CAACe,IAAI,CAAC,IAAI,EAAED,GAAG,EAAEL,EAAE,CAAC;EACvC;AACF;AAEA,IAAMO,MAA+B,GAAG,SAAlCA,MAA+B;EAAA,OAAU;IAC7CV,IAAI,EAAJA,IAAI;IACJW,SAAS,EAAEd,SAAS,CAACG,IAAI,CAAC;IAC1BY,MAAM,EAAEZ,IAAI;IACZa,WAAW,EAAEhB,SAAS,CAACG,IAAI;EAC7B,CAAC;AAAA,CAAC;AAEF,eAAeU,MAAM"}